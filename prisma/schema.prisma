generator client {
  provider = "prisma-client-js"
}

datasource db {
  provider = "postgresql"
  url      = env("DATABASE_URL")
}

model User {
  id         Int     @id @default(autoincrement())
  firstName  String
  profil_img String?
  lastName   String
  email      String  @unique
  password   String
  Order      Order[]
}

model Category {
  id               Int              @id @default(autoincrement())
  name             String
  nestedCategories NestedCategory[]
}

model NestedCategory {
  id         Int       @id @default(autoincrement())
  name       String
  categoryId Int
  category   Category  @relation(fields: [categoryId], references: [id], onDelete: Cascade)
  Product    Product[]
}

model Product {
  id               String         @id @default(uuid())
  title            String
  about            String
  color            Json
  img              String
  details          Json
  spec             Json
  price            Float
  discount_price   Float
  nestedcategoryId Int
  nestedCategoryId NestedCategory @relation(fields: [nestedcategoryId], references: [id])
  orders           Order[]
  MyCart           MyCart[]
}

model MyCart {
  id        Int     @id() @default(autoincrement())
  productId String
  products  Product @relation(fields: [productId], references: [id])
}

model Order {
  id            Int     @id @default(autoincrement())
  count         Int
  subTotal      Float
  productId     String
  userId        Int
  country       String  @default("Unknown")
  discount_code String?
  product       Product @relation(fields: [productId], references: [id], onDelete: Cascade)
  user          User    @relation(fields: [userId], references: [id])
}

model Contact {
  id       Int    @id @default(autoincrement())
  fullName String
  email    String
  phone    String
  message  String
}
